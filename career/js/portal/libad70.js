Portal=Class.create(),Portal.prototype={initialize:function(r,t){this._debug=t,this._portalID=r,this._errorCount=0,this._errorString=""},getResponse:function(r,t){new Ajax.Request("ajax.php",{parameters:"m=portal&portalID="+this._portalID+"&contentType=JSON"+(r.length>0?"&"+r:""),method:"post",evalJSON:"force",onException:function(r,t){this._debug&&this.showDebugConsole(t)}.bind(this),onSuccess:function(r){var o=r.responseJSON;return!o||o.error?void this.showDebugConsole("Error (code): "+o.error):void t(o)}.bind(this)})},showDebugConsole:function(r){var t=$PROT("debugConsole");this._errorCount++,this._errorString.length>0&&(this._errorString+="<br />"),this._errorString+='<div class="notice"><b>#'+this._errorCount+":</b><br />",this._errorString+=(""+r).replace(/\\n/g,"<br />")+"</div>",t.update('<div class="title">Debug Console</div> '+this._errorString).show()}};